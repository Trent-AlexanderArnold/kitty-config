# Kitty Keybindings
# Migrated from wezterm configuration
# Note: In Linux, using ALT as primary modifier (equivalent to wezterm's SUPER)

# Clear all default keybindings first
clear_all_shortcuts yes

# ============================================
# Mouse Support
# ============================================

# Enable mouse scrolling
mouse_map left click ungrabbed mouse_handle_click selection link prompt
mouse_map shift+left click grabbed,ungrabbed mouse_handle_click selection link prompt
mouse_map ctrl+shift+left release grabbed,ungrabbed mouse_handle_click link
mouse_map ctrl+shift+left press grabbed discard_event
mouse_map middle release ungrabbed paste_from_selection
mouse_map left press ungrabbed mouse_selection normal
mouse_map ctrl+alt+left press ungrabbed mouse_selection rectangle
mouse_map left doublepress ungrabbed mouse_selection word
mouse_map left triplepress ungrabbed mouse_selection line
mouse_map ctrl+alt+left triplepress ungrabbed mouse_selection line_from_point
mouse_map right press ungrabbed mouse_selection extend
mouse_map shift+middle release ungrabbed,grabbed paste_selection
mouse_map shift+middle press grabbed discard_event


# ============================================
# Basic Terminal Operations
# ============================================

# Copy/Paste
map ctrl+shift+c copy_to_clipboard
map ctrl+shift+v paste_from_clipboard

# ============================================
# Navigation & Search
# ============================================

# Search (ALT+f in wezterm)
map alt+f launch --type=overlay --stdin-source=@screen_scrollback /usr/bin/env bash -c "fzf --no-sort --no-mouse --exact -i --tac | kitty +kitten clipboard"

# Toggle fullscreen
map f11 toggle_fullscreen

# Cursor movement (send escape sequences like wezterm)
map alt+left send_text all \x1bOH
map alt+right send_text all \x1bOF
map alt+backspace send_text all \x15

# ============================================
# Tab Management
# ============================================

# New tab (ALT+t)
map alt+t new_tab_with_cwd

# Close current tab (ALT+w)
map alt+w close_tab

# Close current window/pane (ALT+w)
map alt+c close_window

# Navigate tabs (ALT+[ and ALT+])
map alt+[ previous_tab
map alt+] next_tab


map alt+enter toggle_layout stack
# Move tabs (ALT+CTRL+[ and ALT+CTRL+])
map alt+ctrl+[ move_tab_backward
map alt+ctrl+] move_tab_forward

# Goto specific tabs (ALT+1 through ALT+9)
map alt+1 goto_tab 1
map alt+2 goto_tab 2
map alt+3 goto_tab 3
map alt+4 goto_tab 4
map alt+5 goto_tab 5
map alt+6 goto_tab 6
map alt+7 goto_tab 7
map alt+8 goto_tab 8
map alt+9 goto_tab 9

# Set tab title (ALT+0 - using kitty's built-in)
map alt+0 set_tab_title

# ============================================
# Window/Pane Management
# ============================================

# New OS window (ALT+n)
map alt+n new_os_window

# Split windows (ALT+\ for left-right split, ALT+CTRL+\ for up-down split)
# Note: vsplit = vertical split line = horizontal layout (left|right)
#       hsplit = horizontal split line = vertical layout (top/bottom)
map alt+backslash launch --location=vsplit --cwd=current
map alt+ctrl+backslash launch --location=hsplit --cwd=current

# Navigate between panes (ALT+CTRL+hjkl - vim style)
map alt+ctrl+h neighboring_window left
map alt+ctrl+l neighboring_window right
map alt+ctrl+k neighboring_window up
map alt+ctrl+j neighboring_window down

# Cycle through windows (kitty default)
map ctrl+shift+] next_window
map ctrl+shift+[ previous_window

# Resize panes (using kitty's resize mode)
map alt+ctrl+r start_resizing_window

# ============================================
# Scrolling
# ============================================

# Scroll by line (ALT+u up, ALT+d down)
map alt+u scroll_line_up
map alt+u scroll_line_up
map alt+u scroll_line_up
map alt+u scroll_line_up
map alt+u scroll_line_up

map alt+d scroll_line_down
map alt+d scroll_line_down
map alt+d scroll_line_down
map alt+d scroll_line_down
map alt+d scroll_line_down

# Scroll by page
map pageup scroll_page_up
map pagedown scroll_page_down

# Scroll to top/bottom
map ctrl+shift+home scroll_home
map ctrl+shift+end scroll_end

# ============================================
# Font Size Adjustment
# ============================================

# Increase/decrease font size
map ctrl+shift+equal change_font_size all +1.0
map ctrl+shift+minus change_font_size all -1.0
map ctrl+shift+0 change_font_size all 0

# ============================================
# Launcher & Utilities
# ============================================

# Kitty hints for URLs (similar to wezterm's QuickSelect for URLs)
map alt+ctrl+u kitten hints --type url --program @

# Open hints for paths
map ctrl+shift+p>f kitten hints --type path --program @

# Open hints for lines
map ctrl+shift+p>l kitten hints --type line --program @

# ============================================
# Reload configuration
# ============================================

map ctrl+shift+f5 load_config_file
map ctrl+shift+f6 debug_config

# ============================================
# NOTES ON FEATURES THAT CANNOT BE DIRECTLY MIGRATED:
# ============================================
#
# 1. Background controls (ALT+/, ALT+,, ALT+., ALT+CTRL+/, ALT+b):
#    - Wezterm has custom Lua callbacks for dynamic background changes
#    - Kitty doesn't support runtime background switching via keybindings
#    - You can use your existing scripts (change-background.sh, etc.) with:
#      map alt+/ launch --type=background /home/jack/.config/kitty/change-background.sh
#    - Or manually edit background_image in kitty.conf and reload
#
# 2. Window resize (ALT+-, ALT+=, ALT+CTRL+Enter):
#    - Kitty doesn't expose window dimension controls via keybindings on Wayland
#    - Window management is typically handled by the Wayland compositor
#    - Use your compositor's keybindings for window sizing
#
# 3. Tab title events (ALT+0 for manual update, ALT+CTRL+0 for reset):
#    - Wezterm uses custom events; kitty uses simpler tab title setting
#    - ALT+0 mapped to set_tab_title (built-in prompt)
#
# 4. Custom tab bar toggle (ALT+9):
#    - Kitty doesn't support runtime tab bar toggling
#    - You can set tab_bar_edge none in kitty.conf to hide it permanently
#    - Or toggle between configs using different conf files
#
# 5. Show launcher (F12):
#    - Wezterm's launcher is built-in; kitty doesn't have equivalent
#    - Consider using a separate tool like rofi/wofi for Wayland
#
# 6. Leader key + Key tables:
#    - Wezterm supports modal key tables (Leader+f for font resize, Leader+p for pane resize)
#    - Kitty doesn't have native modal keybinding support
#    - Font resizing: Use ctrl+shift+equal/minus instead
#    - Pane resizing: Use alt+ctrl+r to enter resize mode, then arrow keys
#
# 7. WSL domain tab (ALT+CTRL+t):
#    - Linux-only setup, this feature is not needed
#
# 8. Mouse binding (Ctrl+click for URLs):
#    - This is enabled by default in kitty
#    - URLs are clickable with ctrl+click or ctrl+shift+click
